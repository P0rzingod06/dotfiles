<?xml version="1.0"?>
<ProcessingGroup
	name="Callout-Generic"
	priority="50"
  ordersPerBatch="10" 
	parent="StandardOrder"
	errorAlertThreshold = "120"
	ruleApplicationSource = "OTOS">
	
<!-- CVS Header: $Source: /CVS/oracle11i/applint/rules_config/om/ProcessingGroup-Callout-Generic-Default.xml,v $, $Revision: 1.17 $, $Author: karac $, $Date: 2014/10/21 14:38:29 $ -->

<CriteriaSet>
	<Criteria>
		<tableName>APPS.WWT_ORIG_ORDER_HEADERS</tableName>
		<columnName>ORDER_SOURCE</columnName>
		<value>Callout Generic</value>
	</Criteria>
</CriteriaSet>

<!-- ******************************** -->
<!-- ****** BEGIN PRE-PROCESS ******* -->
<!-- ******************************** -->

<!-- ******************************** -->
<!-- ****** BEGIN HEADER ************ -->
<!-- ******************************** -->

<Rule name="Default Program Specific Constants from lookup" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Lookup Program Specific Constants from lookup" exitOnSuccess="Y">
		<Action name="Program Specific Constants from lookup" class="simpleLookup">
			<!-- this should do nothing if no rows returned.  default behavior -->
			<Parameter name="lookupType" valueType="STATIC">WWT_CALLOUT_PROGRAM_SPECIFIC_CONSTANTS</Parameter>
			<Parameter name="attribute1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SOURCE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn1" valueType="STATIC">ATTRIBUTE2</Parameter>
			<Parameter name="targetElement1" valueType="TARGET">WWT_STG_ORDER_HEADERS/CUSTOMER_NAME</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn2" valueType="STATIC">ATTRIBUTE3</Parameter>
			<Parameter name="targetElement2" valueType="TARGET">WWT_STG_ORDER_HEADERS/ORDER_SOURCE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn3" valueType="STATIC">ATTRIBUTE4</Parameter>
			<Parameter name="targetElement3" valueType="TARGET">WWT_STG_ORDER_HEADERS/FLOW_STATUS_CODE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn4" valueType="STATIC">ATTRIBUTE5</Parameter>
			<Parameter name="targetElement4" valueType="TARGET">WWT_STG_ORDER_HEADERS/SALES_CHANNEL_CODE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn5" valueType="STATIC">ATTRIBUTE6</Parameter>
			<Parameter name="targetElement5" valueType="TARGET">WWT_STG_ORDER_HEADERS/SALESREP</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn6" valueType="STATIC">ATTRIBUTE7</Parameter>
			<Parameter name="targetElement6" valueType="TARGET">WWT_STG_ORDER_HEADERS/BUYER_NAME</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn7" valueType="STATIC">ATTRIBUTE8</Parameter>
			<Parameter name="targetElement7" valueType="TARGET">WWT_STG_ORDER_HEADERS/ORDER_TYPE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn8" valueType="STATIC">ATTRIBUTE9</Parameter>
			<Parameter name="targetElement8" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/autoCreateContactFlag</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn9" valueType="STATIC">ATTRIBUTE10</Parameter>
			<Parameter name="targetElement9" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/autoCreateAddressFlag</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn10" valueType="STATIC">ATTRIBUTE11</Parameter>
			<Parameter name="targetElement10" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE34</Parameter> <!-- good email DL -->
			<!-- ... -->
			<Parameter name="returnColumn11" valueType="STATIC">ATTRIBUTE12</Parameter>
			<Parameter name="targetElement11" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE35</Parameter> <!-- failed email DL -->
			<!-- ... -->
			<Parameter name="returnColumn12" valueType="STATIC">ATTRIBUTE13</Parameter>
			<Parameter name="targetElement12" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE32</Parameter> <!-- good email subject -->
			<!-- ... -->
			<Parameter name="returnColumn13" valueType="STATIC">ATTRIBUTE14</Parameter>
			<Parameter name="targetElement13" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE33</Parameter> <!-- failed email subject -->
			<!-- ... -->
			<Parameter name="returnColumn14" valueType="STATIC">ATTRIBUTE16</Parameter>
			<Parameter name="targetElement14" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/nullOrderedByFlag</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn15" valueType="STATIC">ATTRIBUTE17</Parameter>
			<Parameter name="targetElement15" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/projectTaskFlag</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn16" valueType="STATIC">ATTRIBUTE19</Parameter>
			<Parameter name="targetElement16" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/shipToContactFirstName</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn17" valueType="STATIC">ATTRIBUTE20</Parameter>
			<Parameter name="targetElement17" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/shipToContactLastName</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn18" valueType="STATIC">ATTRIBUTE21</Parameter>
			<Parameter name="targetElement18" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/shipToContactPhone</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn19" valueType="STATIC">ATTRIBUTE22</Parameter>
			<Parameter name="targetElement19" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/addCalloutContactFlag</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn20" valueType="STATIC">ATTRIBUTE23</Parameter>
			<Parameter name="targetElement20" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE40</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn21" valueType="STATIC">ATTRIBUTE24</Parameter>
			<Parameter name="targetElement21" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/vendorId</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn22" valueType="STATIC">ATTRIBUTE25</Parameter>
			<Parameter name="targetElement22" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/vendorSiteId</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn23" valueType="STATIC">ATTRIBUTE26</Parameter>
			<Parameter name="targetElement23" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/poCost</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn24" valueType="STATIC">ATTRIBUTE27</Parameter>
		 	<Parameter name="targetElement24" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/poBuyerId</Parameter>
		    <!-- ... -->
			<Parameter name="returnColumn25" valueType="STATIC">ATTRIBUTE28</Parameter>
			<Parameter name="targetElement25" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/poGroupType</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn26" valueType="STATIC">ATTRIBUTE29</Parameter>
			<Parameter name="targetElement26" valueType="TARGET">WWT_STG_ORDER_HEADERS/PRICE_LIST</Parameter>
		    <!-- ... -->
			<Parameter name="returnColumn27" valueType="STATIC">ATTRIBUTE30</Parameter>
			<Parameter name="targetElement27" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/custPoPrefixValue</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn28" valueType="STATIC">ATTRIBUTE18</Parameter>
			<Parameter name="targetElement28" valueType="TARGET">WWT_STG_ORDER_HEADERS/OTOSTempVariables/projectName</Parameter>
			<!-- ... -->	
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Concat Customer PO Prefix Value to Customer PO Number" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Concat Customer PO Prefix Value to Customer PO Number" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE40</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">Y</RHSValue>
		</Condition>
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/custPoPrefixValue</LHSValue>
			<Operator>IS NOT NULL</Operator>
			<RHSValue valueType="STATIC"></RHSValue>
		</Condition> 
		<Action name="Concat Customer PO Prefix Value to Customer PO Number" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/custPoPrefixValue</Parameter>
			<Parameter name="field2" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/CUSTOMER_PO_NUMBER</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/CUSTOMER_PO_NUMBER</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Concat Email Subject with Customer PO Number" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Concat Email Subject with Customer PO Number" exitOnSuccess="N">
		<Action name="Concat Good Email Subject with Customer PO Number" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE32</Parameter>
			<Parameter name="field2" valueType="STATIC">|</Parameter>
			<Parameter name="field3" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/CUSTOMER_PO_NUMBER</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE32</Parameter>
			<ExceptionHandler type="ERROR">Could not Build Email Subject with Customer PO Number</ExceptionHandler>
		</Action>
		<Action name="Concat Bad Email Subject with Customer PO Number" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE33</Parameter>
			<Parameter name="field2" valueType="STATIC">|</Parameter>
			<Parameter name="field3" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/CUSTOMER_PO_NUMBER</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE33</Parameter>
			<ExceptionHandler type="ERROR">Could not Build Email Subject with Customer PO Number</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Default Invoice Address from lookup" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Default Invoice Address from lookup" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/INVOICE_ADDRESS1</LHSValue>
			<Operator>IS NULL</Operator>
			<RHSValue valueType="STATIC"></RHSValue>
		</Condition>
		<Action name="Default Invoice Address from lookup" class="simpleLookup">
			<!-- this should do nothing if no rows returned.  default behavior -->
			<Parameter name="lookupType" valueType="STATIC">WWT_CALLOUT_PROGRAM_SPECIFIC_ADDRESS_CONSTANTS</Parameter>
			<Parameter name="attribute1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SOURCE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn1" valueType="STATIC">ATTRIBUTE2</Parameter>
			<Parameter name="targetElement1" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_ADDRESS1</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn2" valueType="STATIC">ATTRIBUTE3</Parameter>
			<Parameter name="targetElement2" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_ADDRESS2</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn3" valueType="STATIC">ATTRIBUTE4</Parameter>
			<Parameter name="targetElement3" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_ADDRESS3</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn4" valueType="STATIC">ATTRIBUTE5</Parameter>
			<Parameter name="targetElement4" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_ADDRESS4</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn5" valueType="STATIC">ATTRIBUTE6</Parameter>
			<Parameter name="targetElement5" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_CITY</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn6" valueType="STATIC">ATTRIBUTE7</Parameter>
			<Parameter name="targetElement6" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_STATE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn7" valueType="STATIC">ATTRIBUTE8</Parameter>
			<Parameter name="targetElement7" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_POSTAL_CODE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn8" valueType="STATIC">ATTRIBUTE9</Parameter>
			<Parameter name="targetElement8" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_COUNTY</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn9" valueType="STATIC">ATTRIBUTE10</Parameter>
			<Parameter name="targetElement9" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_COUNTRY</Parameter>
			<!-- ... -->
   		<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Default Ship To address if null from lookup" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Default Ship To address if null from lookup" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SHIP_TO_ADDRESS1</LHSValue>
			<Operator>IS NULL</Operator>
			<RHSValue valueType="STATIC"></RHSValue>
		</Condition>
		<Action name="Default Ship To address if null from lookup" class="simpleLookup">
			<!-- this should do nothing if no rows returned.  default behavior -->
			<Parameter name="lookupType" valueType="STATIC">WWT_CALLOUT_PROGRAM_SPECIFIC_ADDRESS_CONSTANTS</Parameter>
			<Parameter name="attribute1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SOURCE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn10" valueType="STATIC">ATTRIBUTE11</Parameter>
			<Parameter name="targetElement10" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_ADDRESS1</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn11" valueType="STATIC">ATTRIBUTE12</Parameter>
			<Parameter name="targetElement11" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_ADDRESS2</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn12" valueType="STATIC">ATTRIBUTE13</Parameter>
			<Parameter name="targetElement12" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_ADDRESS3</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn13" valueType="STATIC">ATTRIBUTE14</Parameter>
			<Parameter name="targetElement13" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_ADDRESS4</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn14" valueType="STATIC">ATTRIBUTE15</Parameter>
			<Parameter name="targetElement14" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_CITY</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn15" valueType="STATIC">ATTRIBUTE16</Parameter>
			<Parameter name="targetElement15" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_STATE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn16" valueType="STATIC">ATTRIBUTE17</Parameter>
			<Parameter name="targetElement16" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_POSTAL_CODE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn18" valueType="STATIC">ATTRIBUTE18</Parameter>
			<Parameter name="targetElement18" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_COUNTY</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn19" valueType="STATIC">ATTRIBUTE19</Parameter>
			<Parameter name="targetElement19" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_COUNTRY</Parameter>
			<!-- ... -->
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<!-- HEADER DEFAULTS -->
<Rule name="Header Defaults" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Set Header Level Defaults" exitOnSuccess="Y">
		<Action name="Set Ship To Customer Name" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/CUSTOMER_NAME</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_CUSTOMER</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Set Invoice Customer Name" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/CUSTOMER_NAME</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_CUSTOMER</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Copy Cart Header ID to Header DFF ATT73" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE12</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/ATTRIBUTE73</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Copy Shipping Instructions" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE1</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIPPING_INSTRUCTIONS</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Copy Config Notes" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE3</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/ATTRIBUTE100</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<!--MAP SHIP TO ADDRESS-->
<Rule  name="Map Ship To Address" class="HEADER" executeOnReprocess="Y">
	<ConditionSet name="Map Ship To Address" exitOnSuccess="Y">
		<Action name="Map Ship To Address" class="mapShipToAddress">		
		<ExceptionHandler type="WARN">Could not map Ship To Address</ExceptionHandler>							
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Set Ship To Contact" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Set Ship To Contact" exitOnSuccess="N">
		<Action name="Copy WWT_ATTRIBUTE4 to Ship To First Name" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE4</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_FIRST_NAME</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Copy WWT_ATTRIBUTE10 to Ship To Last Name" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE10</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_LAST_NAME</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Concat Ship To FN and LN" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_FIRST_NAME</Parameter>
			<Parameter name="field2" valueType="STATIC"> </Parameter>
			<Parameter name="field3" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_LAST_NAME</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT</Parameter>
			<ExceptionHandler type="ERROR">Could not Build SHIP_TO_CONTACT</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Set Ship To Contact to Default value if tempVar's shipToContactFirstName, shipToContactLastName and shipToContactPhone is not null" class="HEADER" executeOnReprocess="N">
  <ConditionSet name="Set Default Ship To Contact Info" exitOnSuccess="N">
		<Condition> 
			<LHSValue>WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/shipToContactFirstName</LHSValue>
			<Operator>IS NOT NULL</Operator>
			<RHSValue valueType="STATIC"></RHSValue>
		</Condition>
		<Condition> 
			<LHSValue>WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/shipToContactLastName</LHSValue>
			<Operator>IS NOT NULL</Operator>
			<RHSValue valueType="STATIC"></RHSValue>
		</Condition>
		<Condition> 
			<LHSValue>WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/shipToContactPhone</LHSValue>
			<Operator>IS NOT NULL</Operator>
			<RHSValue valueType="STATIC"></RHSValue>
		</Condition>
	 <Action name="Copy tempVar shipToContactFirstName to Ship To First Name" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/shipToContactFirstName</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_FIRST_NAME</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Copy tempVar shipToContactLastName to Ship To Last Name" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/shipToContactLastName</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_LAST_NAME</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Concat Ship To FN and LN" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_FIRST_NAME</Parameter>
			<Parameter name="field2" valueType="STATIC"> </Parameter>
			<Parameter name="field3" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_LAST_NAME</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT</Parameter>
			<ExceptionHandler type="ERROR">Could not Build SHIP_TO_CONTACT</ExceptionHandler>
		</Action>
		<Action name="Copy tempVar shipToContactPhone to Ship To Telephone" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/shipToContactPhone</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_TELEPHONE</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Null Ordered By if flag from lookup is Y" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Null Ordered By if flag from lookup is Y" exitOnSuccess="Y">
		<Condition> 
			<LHSValue>WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/nullOrderedByFlag</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">Y</RHSValue>
		</Condition>
		<Action name="Null Ordered By First Name" class="assignment">
			<Parameter name="sourceElement" valueType="STATIC"></Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/ORDERED_BY_CONTACT_FIRST_NAME</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Null Ordered By Last Name" class="assignment">
			<Parameter name="sourceElement" valueType="STATIC"></Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/ORDERED_BY_CONTACT_LAST_NAME</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="AutoCreate Addresses" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="AutoCreate Addresses" exitOnSuccess="Y">
		<Condition> 
			<LHSValue>WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/autoCreateAddressFlag</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">Y</RHSValue>
		</Condition>
		<Action name="AutoCreate Ship to address" class="createShipToAddress">
			<ExceptionHandler type="ERROR">Could not autocreate Ship To Address</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="AutoCreate Contacts" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="AutoCreate Contacts" exitOnSuccess="Y">
		<Condition> 
			<LHSValue>WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/autoCreateContactFlag</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">Y</RHSValue>
		</Condition>
		<Action name="Autocreate Ship To Contact" class="createShipToContact">
			<ExceptionHandler type="ERROR">Could not create Ship To Contact</ExceptionHandler>
		</Action>
		<Action name="Autocreate Ordered By Contact" class="createOrderedByContact">
			<ExceptionHandler type="ERROR">Could not create Ordered By Contact</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Calculate Request Date and Order Date" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Calculate Request Date" exitOnSuccess="Y">
		<Action name="Set temp variable to SYSDATE" class="dateFormat">
			<Parameter name="newPattern" valueType="STATIC">dd-MMM-yyyy HH:mm:ss</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/OTOSTempVariables/tempDate</Parameter>	
			<ExceptionHandler type="WARN">The SYSDATE could not be formatted</ExceptionHandler>	
		</Action>
		<Action name="Set Order Date" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/OTOSTempVariables/tempDate</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/ATTRIBUTE1</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Set Request Date" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/OTOSTempVariables/tempDate</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/REQUEST_DATE</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
 </ConditionSet>
</Rule>

<Rule  name="Build Contact-Phone-Fax" class="HEADER" executeOnReprocess="Y">
	<ConditionSet name="Build Contact-Phone-FAX" exitOnSuccess="Y">		
		<Action name="build Contact-Phone-Fax" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT</Parameter>
			<Parameter name="field2" valueType="STATIC"> </Parameter>
			<Parameter name="field4" valueType="STATIC"> P#</Parameter>
			<Parameter name="field5" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_TELEPHONE</Parameter>
			<Parameter name="field6" valueType="STATIC"> F#</Parameter>
			<Parameter name="field7" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_FAX</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/ATTRIBUTE13</Parameter>
			<ExceptionHandler type="WARN">Could not build Contact Concatenation String for HEADERS.ATTRIBUTE13</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule> 

<Rule name="Build Mark For" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Build Mark For" exitOnSuccess="N">
		<Action name="Build Mark For" class="concatenateFields">
			<Parameter name="field1" valueType="STATIC">Recipient: </Parameter>
			<Parameter name="field2" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT</Parameter>
			<Parameter name="field3" valueType="STATIC"> </Parameter>
			<Parameter name="field4" valueType="STATIC">Recipient Phone: </Parameter>
			<Parameter name="field5" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SHIP_TO_CONTACT_TELEPHONE</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/ATTRIBUTE9</Parameter>
			<Parameter name="maxLength" valueType="STATIC">240</Parameter>
			<ExceptionHandler type="ERROR">Could not Build Mark For</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<!-- ADD TASK -->
<Rule name="Add Task" class="HEADER" executeOnReprocess="Y">
	<ConditionSet name="Add Task" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/OTOSTempVariables/projectName</LHSValue>
			<Operator>IS NOT NULL</Operator>
			<RHSValue valueType="STATIC"></RHSValue>
		</Condition>
 	<Action name="Add Task" class="addTask">
			<Parameter name="taskName" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/HEADER_ID</Parameter>
			<Parameter name="projectName" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/OTOSTempVariables/projectName</Parameter>
			<Parameter name="serviceTypeCode" valueType="STATIC">Field Work</Parameter>
			<ExceptionHandler type="ERROR">Could not add Task</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule> 


<Rule name="Get Internal LADP username email address" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Get Internal LADP username email address" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE9</LHSValue>
			<Operator>NOT LIKE</Operator>
			<RHSValue valueType="LOOKUP">EMAIL_CHAR</RHSValue>
		</Condition>
		<Action name="Get Internal LADP username email address" class="multiItemQuery">
			<Parameter name="sqlConstantName" valueType="STATIC">getEmailFromLDAPUserNameOTOSSQL</Parameter>
			<Parameter name="dbName" valueType="STATIC">ERP</Parameter>
			<Parameter name="actionOnMultiple" valueType="STATIC">ERROR</Parameter>
			<Parameter name="sourceElement1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE9</Parameter>
			<ExceptionHandler type="ERROR">Could not query FND USER table to get internal email address.</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Concat Callout Creator To if flag from lookup is Y" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Concat Callout creator to Good Email DL" exitOnSuccess="N">
		<Condition> 
			<LHSValue>WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/addCalloutContactFlag</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">Y</RHSValue>
		</Condition>
		<Action name="Concat Callout Creator To to WWT_ATTRIBUTE34" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE9</Parameter>
			<Parameter name="field2" valueType="STATIC">,</Parameter>
			<Parameter name="field3" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE34</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE34</Parameter>
			<ExceptionHandler type="ERROR"></ExceptionHandler>
		</Action>
	</ConditionSet>
	<ConditionSet name="Concat Callout creator to Bad Email DL" exitOnSuccess="Y">
		<Condition> 
			<LHSValue>WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/addCalloutContactFlag</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">Y</RHSValue>
		</Condition>
		<Action name="Concat Callout Creator To to WWT_ATTRIBUTE35" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE9</Parameter>
			<Parameter name="field2" valueType="STATIC">,</Parameter>
			<Parameter name="field3" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE35</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE35</Parameter>
			<ExceptionHandler type="ERROR"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Populate ASN email DFF" class="HEADER" executeOnReprocess="Y">
	<ConditionSet name="Lookup Program Specific Constants from lookup" exitOnSuccess="Y">
		<Action name="Program Specific Constants from lookup" class="simpleLookup">
			<!-- this should do nothing if no rows returned.  default behavior -->
			<Parameter name="lookupType" valueType="STATIC">WWT_CALLOUT_PROGRAM_SPECIFIC_ADDRESS_CONSTANTS</Parameter>
			<Parameter name="attribute1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SOURCE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn1" valueType="STATIC">ATTRIBUTE20</Parameter>
			<Parameter name="targetElement1" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/ATTRIBUTE48</Parameter>
			<ExceptionHandler type="ERROR">Error getting ASN email.</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>


<Rule name="Populate Freight Terms" class="HEADER" executeOnReprocess="Y">
	<ConditionSet name="Lookup Program Specific Constants from lookup" exitOnSuccess="Y">
		<Action name="Program Specific Constants from lookup" class="simpleLookup">
			<!-- this should do nothing if no rows returned.  default behavior -->
			<Parameter name="lookupType" valueType="STATIC">WWT_CALLOUT_PROGRAM_SPECIFIC_ADDRESS_CONSTANTS</Parameter>
			<Parameter name="attribute1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SOURCE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn1" valueType="STATIC">ATTRIBUTE21</Parameter>
			<Parameter name="targetElement1" valueType="TARGET">WWT_STG_ORDER_HEADERS/FREIGHT_TERMS_CODE</Parameter>
			<ExceptionHandler type="ERROR">Error getting Freight Terms.</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Calculate and Set Freight Charge for Amazon" class="HEADER" executeOnReprocess="Y">
	<ConditionSet name="Calculate Total Price" exitOnSuccess="N">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SOURCE</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">Amazon ATS Callout</RHSValue>
		</Condition>
		<Action name="Calculate Total Price" class="singleItemQuery">
			<Parameter name="sqlConstantName" valueType="STATIC">AMZNTotalLinePriceOTOSSQL</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/OTOSTempVariables/tempTotalCost</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>					
		</Action>
	</ConditionSet>	
	<ConditionSet name="If SHIP_TO_COUNTRY = USA" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SOURCE</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">Amazon ATS Callout</RHSValue>
		</Condition>
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SHIP_TO_COUNTRY</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">US</RHSValue>
		</Condition>
		<Action name="Freight Charges are 1.5% of total" class="arithmetic">
			<Parameter name="LHS" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/OTOSTempVariables/tempTotalCost</Parameter>
			<Parameter name="operator" valueType="STATIC">*</Parameter>
			<Parameter name="RHS" valueType="LOOKUP">US_FREIGHT_CHARGES_PERCENT</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/FREIGHT_CHARGES</Parameter>
		</Action>
	</ConditionSet>	
	<ConditionSet name="SHIP_TO_COUNTRY != USA" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SOURCE</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">Amazon ATS Callout</RHSValue>
		</Condition>
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SHIP_TO_COUNTRY</LHSValue>
			<Operator>!=</Operator>
			<RHSValue valueType="STATIC">US</RHSValue>
		</Condition>
		<Action name="Freight Charges are 3.0% of total" class="arithmetic">
			<Parameter name="LHS" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/OTOSTempVariables/tempTotalCost</Parameter>
			<Parameter name="operator" valueType="STATIC">*</Parameter>
			<Parameter name="RHS" valueType="LOOKUP">NON_US_FREIGHT_CHARGES_PERCENT</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/FREIGHT_CHARGES</Parameter>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Set Defaults for United Health Group" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Set Default Header values for United Health Group" exitOnSuccess="Y">
			<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SOURCE</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">United Health Group</RHSValue>
		</Condition>
    <Action name="Map ITG Number to End Customer Order Number" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE3</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/ATTRIBUTE22</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action> 
		<Action name="Cart ID and ITG Number to CUSTOMER_PO_NUMBER" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/CUSTOMER_PO_NUMBER</Parameter>
			<Parameter name="field2" valueType="STATIC">-</Parameter>
			<Parameter name="field3" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/ATTRIBUTE22</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/CUSTOMER_PO_NUMBER</Parameter>
			<ExceptionHandler type="ERROR"></ExceptionHandler>
		</Action>
		<Action name="Program Specific Constants from lookup" class="simpleLookup">
			<Parameter name="lookupType" valueType="STATIC">WWT_CALLOUT_PROGRAM_SPECIFIC_ADDRESS_CONSTANTS</Parameter>
			<Parameter name="attribute1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SOURCE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn1" valueType="STATIC">ATTRIBUTE23</Parameter>
			<Parameter name="targetElement1" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/ATTRIBUTE100</Parameter>
			</Action>
    <Action name="Map Orig WWT_ATTRIBUTE2 to Shipping Method" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE2</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIPPING_METHOD</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
    <Action name="Set Context Value" class="assignment">
			<Parameter name="sourceElement" valueType="LOOKUP">UHG_CONTEXT</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/CONTEXT</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
    <Action name="Map Orig WWT_ATTRIBUTE14 to Header STG DFF ATTRIBUTE16" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE14</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/ATTRIBUTE16</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		    <Action name="Map Orig WWT_ATTRIBUTE24 to Header STG DFF ATTRIBUTE24" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE11</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/ATTRIBUTE24</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		 </Action>
		    <Action name="Map Orig WWT_ATTRIBUTE17 to Header STG DFF ATTRIBUTE17" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE15</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/ATTRIBUTE17</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
	</Action>
			    <Action name="Map Orig WWT_ATTRIBUTE19 to Header STG DFF ATTRIBUTE16" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE17</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_STG_ORDER_HEADERS_DFF/ATTRIBUTE19</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
	</Action>
	</ConditionSet>
</Rule>

<Rule name="Rackspace Defaults Identify customer name based on different ship to countries" class="HEADER" executeOnReprocess="N">
	<ConditionSet name="Check ship to country for different customers" exitOnSuccess="Y">
			<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SOURCE</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="LOOKUP">RACKSPACE_SOURCE</RHSValue>
			</Condition>
		<Action name="Lookup WWT_CALLOUT_MULTIPLE_CUSTOMER_NAMES" class="simpleLookup">
			<Parameter name="lookupType" valueType="STATIC">WWT_CALLOUT_MULTIPLE_CUSTOMER_NAMES</Parameter>			
			<Parameter name="attribute1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SOURCE</Parameter>
			<Parameter name="attribute2" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SHIP_TO_COUNTRY</Parameter>
			<Parameter name="returnColumn1" valueType="STATIC">ATTRIBUTE3</Parameter>
			<Parameter name="targetElement1" valueType="TARGET">WWT_STG_ORDER_HEADERS/CUSTOMER_NAME</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	 <Action name="Set invoce to customer name" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/CUSTOMER_NAME</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/INVOICE_CUSTOMER</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action> 
		 <Action name="Set Ship To customer name" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/CUSTOMER_NAME</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_TO_CUSTOMER</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<!-- ******************************** -->
<!-- ****** BEGIN LINES  ************ -->
<!-- ******************************** -->

<!-- LINES DEFUALTS -->
<Rule name="Lines Defaults" class="LINE" executeOnReprocess="N">
	<ConditionSet name="Set Line Level Defaults" exitOnSuccess="Y">
		<Action name="Copy Cart Line ID To Line DFF ATT73" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_LINES/WWT_ATTRIBUTE13</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_LINES/WWT_STG_ORDER_LINES_DFF/ATTRIBUTE73</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Set Line level Customer PO Number" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/CUSTOMER_PO_NUMBER</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_LINES/CUST_PO_NUMBER</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Get all 4 Item Segments based on Inventory Item ID" class="LINE" executeOnReprocess="N">
	<ConditionSet name="Get 4 Item Segments" exitOnSuccess="Y">
		<Action name="Get 4 Item Segments" class="multiItemQuery">
			<Parameter name="sqlConstantName" valueType="STATIC">getItemSegmentsOTOSSQL</Parameter>
			<Parameter name="dbName" valueType="STATIC">ERP</Parameter>
			<Parameter name="actionOnMultiple" valueType="STATIC">ERROR</Parameter>
			<Parameter name="sourceElement1" valueType="REFERENCE">WWT_STG_ORDER_LINES/INVENTORY_ITEM_ID</Parameter>
			<Parameter name="sourceElement2" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/ORG_ID</Parameter>
			<ExceptionHandler type="ERROR">Could not query all 4Inventory Item Segments.</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Default Program Specific Constants from lookup" class="LINE" executeOnReprocess="N">
	<ConditionSet name="Lookup Program Specific Constants from lookup" exitOnSuccess="Y">
		<Action name="Program Specific Constants from lookup" class="simpleLookup">
			<!-- this should do nothing if no rows returned.  default behavior -->
			<Parameter name="lookupType" valueType="STATIC">WWT_CALLOUT_PROGRAM_SPECIFIC_CONSTANTS</Parameter>
			<Parameter name="attribute1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SOURCE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn1" valueType="STATIC">ATTRIBUTE15</Parameter>
			<Parameter name="targetElement1" valueType="TARGET">WWT_STG_ORDER_LINES/LINE_TYPE</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Get Customer PO Number for El Paso Callout" class="LINE" executeOnReprocess="N">
	<ConditionSet name="Get Customer PO Number for El Paso Callout" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SOURCE</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">El Paso Microsoft Callout</RHSValue>
		</Condition>
		<Action name="Get Cust PO Number from MRP attribute15" class="multiItemQuery">
			<Parameter name="sqlConstantName" valueType="STATIC">getMSFTCustPoFromMRPOTOSSQL</Parameter>
			<Parameter name="dbName" valueType="STATIC">ERP</Parameter>
			<Parameter name="actionOnMultiple" valueType="STATIC">ERROR</Parameter>
			<Parameter name="sourceElement1" valueType="REFERENCE">WWT_STG_ORDER_LINES/INVENTORY_ITEM_ID</Parameter>
			<ExceptionHandler type="ERROR">Could not query getMSFTCustPoOTOSSQL</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<!-- BUILD UP LINE INFO INTO TEMP VAR SO IT CAN BE ADDED INTO THE EMAIL BODY IN POST PROCESS RULE -->
<Rule name="Build Email Body for each line" class="LINE" executeOnReprocess="N">
	<ConditionSet name="Build Email Body for El Paso each line" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SOURCE</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">El Paso Microsoft Callout</RHSValue>
		</Condition>
		<Action name="Build Email Body" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/tempVar2</Parameter>
			<Parameter name="field2" valueType="STATIC">
<![CDATA[
<html>
<body>
<ul TYPE="square">
<li>&nbsp;&nbsp;Part #: %WWT_STG_ORDER_LINES/INVENTORY_ITEM_SEGMENT_2% <br> 
&nbsp;&nbsp;Qty: %WWT_STG_ORDER_LINES/ORDERED_QUANTITY% <br>  
&nbsp;&nbsp;Description #: %WWT_STG_ORDER_LINES/USER_ITEM_DESCRIPTION%  <br>
&nbsp;&nbsp;Customer PO Number #: %WWT_STG_ORDER_LINES/CUST_PO_NUMBER%  <p>
</ul>
</body>
</html>]]>
			</Parameter>
      <Parameter name="field1" valueType="STATIC"> 
      </Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/tempVar2</Parameter>
			<ExceptionHandler type="ERROR"></ExceptionHandler>
		</Action>
		<Action name="Concat tempVar to WWT_ATTRIBUTE47" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE47</Parameter>
			<Parameter name="field2" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/tempVar2</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE47</Parameter>
			<ExceptionHandler type="ERROR"></ExceptionHandler>
		</Action>
	</ConditionSet>
	<ConditionSet name="Build Email Body for each line" exitOnSuccess="Y">
		<Action name="Build Email Body" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/tempVar2</Parameter>
			<Parameter name="field2" valueType="STATIC">
<![CDATA[
<html>
<body>
<ul TYPE="square">
<li>&nbsp;&nbsp;Part #: %WWT_STG_ORDER_LINES/INVENTORY_ITEM_SEGMENT_2% <br> 
&nbsp;&nbsp;Qty: %WWT_STG_ORDER_LINES/ORDERED_QUANTITY% <br>  
&nbsp;&nbsp;Description #: %WWT_STG_ORDER_LINES/USER_ITEM_DESCRIPTION%  <p>
</ul>
</body>
</html>]]>
			</Parameter>
      <Parameter name="field1" valueType="STATIC"> 
      </Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/tempVar2</Parameter>
			<ExceptionHandler type="ERROR"></ExceptionHandler>
		</Action>
		<Action name="Concat tempVar to WWT_ATTRIBUTE47" class="concatenateFields">
			<Parameter name="field1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE47</Parameter>
			<Parameter name="field2" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/tempVar2</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE47</Parameter>
			<ExceptionHandler type="ERROR"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Get Drop Ship Attributes" class="LINE" executeOnReprocess="N">
	<ConditionSet name="Get Drop Ship Attributes" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE40</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">Y</RHSValue>
		</Condition> 
		<Action name="Set Drop Ship Attributes" class="dropShipCalloutLineData">
		  <Parameter name="vendorId" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/vendorId</Parameter>
			<Parameter name="vendorSiteId" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/vendorSiteId</Parameter>
			<Parameter name="poCost" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/poCost</Parameter>
			<Parameter name="poBuyerId" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/poBuyerId</Parameter>
			<Parameter name="poGroupType" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/poGroupType</Parameter>
			<ExceptionHandler type="ERROR">Could not Set Drop Ship Attributes</ExceptionHandler>
		</Action>
		<Action name="Copy Ship From Org from Lines to Header" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_LINES/SHIP_FROM_ORG_ID</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_HEADERS/SHIP_FROM_ORG_ID</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
		<Action name="Copy Price List from Header to Lines" class="assignment">
			<Parameter name="sourceElement" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/PRICE_LIST</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_LINES/PRICE_LIST</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>


<Rule name="Gather Xref from lookup" class="LINE" executeOnReprocess="Y">
	<ConditionSet name="Lookup Program Specific Constants from lookup" exitOnSuccess="Y">
		<Action name="Program Specific Constants from lookup" class="simpleLookup">
			<!-- this should do nothing if no rows returned.  default behavior -->
			<Parameter name="lookupType" valueType="STATIC">WWT_CALLOUT_COMMON_VIEW</Parameter>
			<Parameter name="attribute1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SOURCE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn1" valueType="STATIC">ATTRIBUTE7</Parameter>
			<Parameter name="actionOnMultiple" valueType="STATIC">FIRST</Parameter>
			<Parameter name="targetElement1" valueType="TARGET">WWT_STG_ORDER_LINES/OTOSTempVariables/xrefName</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Populating customer part number in line DFF using xref" class="LINE" executeOnReprocess="Y">
	<ConditionSet name="Populating customer part number in line DFF using xref" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_LINES/OTOSTempVariables/xrefName</LHSValue>
			<Operator>IS NOT NULL</Operator>
			<RHSValue valueType="STATIC"></RHSValue>
		</Condition> 
		<Action name="Get xref part number and description." class="multiItemQuery">
			<Parameter name="sqlConstantName" valueType="STATIC">xrefCustPartNumOTOSSQL</Parameter>
			<Parameter name="dbName" valueType="STATIC">ERP</Parameter>
			<Parameter name="actionOnMultiple" valueType="STATIC">ERROR</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>  

<Rule name="Default Customer Line Number for El Paso" class="LINE" executeOnReprocess="Y">
	<ConditionSet name="Default Customer Line Number for El Paso" exitOnSuccess="Y">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SOURCE</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">El Paso Microsoft Callout</RHSValue>
		</Condition> 
		<Action name="Set customer line number for El Paso." class="assignment">
			<Parameter name="sourceElement" valueType="LOOKUP">CUST_LINE_NUM_EP</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_LINES/CUSTOMER_LINE_NUMBER</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>  

<Rule name="Get Customer Part Number for Rackspace " class="LINE" executeOnReprocess="N">
	<ConditionSet name="Check source based on the different customer" exitOnSuccess="Y">
			<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/SOURCE</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="LOOKUP">RACKSPACE_SOURCE</RHSValue>
		</Condition>		
			<Action name="Get Customer Part Number from MTL table" class="singleItemQuery">
			<Parameter name="sqlConstantName" valueType="STATIC">grabCustomerPartNumberForRackspaceOTOSSQL</Parameter>
			<Parameter name="dbName" valueType="STATIC">ERP</Parameter>
			<Parameter name="actionOnMultiple" valueType="STATIC">FIRST</Parameter>
			<Parameter name="targetElement" valueType="TARGET">WWT_STG_ORDER_LINES/ATTRIBUTE11</Parameter>
			<ExceptionHandler type="NONE"></ExceptionHandler>						
		</Action>
	</ConditionSet>
</Rule>



<!-- ******************************** -->
<!-- ****** BEGIN POST-PROCESS ****** -->
<!-- ******************************** -->

<!-- ******************************** -->
<!-- ****** BEGIN POST-PINWHEEL ****** -->
<!-- ******************************** -->


<Rule name="Get Skip Reservation Flag from lookup" class="POST-PINWHEEL" executeOnReprocess="Y">
	<ConditionSet name="Lookup Program Specific Constants from lookup" exitOnSuccess="Y">
		<Action name="Program Specific Constants from lookup" class="simpleLookup">
			<!-- this should do nothing if no rows returned.  default behavior -->
			<Parameter name="lookupType" valueType="STATIC">WWT_CALLOUT_PROGRAM_SPECIFIC_ADDRESS_CONSTANTS</Parameter>
			<Parameter name="attribute1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/SOURCE</Parameter>
			<!-- ... -->
			<Parameter name="returnColumn1" valueType="STATIC">ATTRIBUTE22</Parameter>
			<Parameter name="targetElement1" valueType="TARGET">WWT_STG_ORDER_HEADERS/OTOSTempVariables/skipReserve</Parameter>
			<ExceptionHandler type="ERROR">Error getting skip reserve flag.</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<!-- GRAB SO# FROM OE_ORDER_HEADERS_ALL BY PASSING IN CUST PO NUMBER -->
<Rule name="Get SO Header ID from ooha and call reservation pkg" class="POST-PINWHEEL" executeOnReprocess="Y">
	<ConditionSet name="Get SO Header ID from ooha and call reservation pkg" exitOnSuccess="N">
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/STATUS</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">PROCESSED</RHSValue>
		</Condition>
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/OTOSTempVariables/skipReserve</LHSValue>
			<Operator>!=</Operator>
			<RHSValue valueType="STATIC">Y</RHSValue>
		</Condition> 
    <Action name="Get SO# from ooha" class="multiItemQuery">
			<Parameter name="sqlConstantName" valueType="STATIC">grabSalesOrderNumberOTOSSQL</Parameter>
			<Parameter name="dbName" valueType="STATIC">ERP</Parameter>
			<Parameter name="sourceElement1" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/ORIG_SYS_DOCUMENT_REF</Parameter>		
			<ExceptionHandler type="ERROR">POST-PINWHEEL OTOS SQL: grabSalesOrderNumberOTOSSQL</ExceptionHandler>
		</Action>
    <!-- CALL APPS.WWT_ORCP_INVENTORY_PROCESSOR.CONVERT_CART_RES_TO_ORDER_RES  TO MOVE RESERVATION FROM CART RESERVATION TO A SALES ORDER RESERVATION  -->
		<Action name="Call sync_reservations" class="genericDBProcedureCall">
			<Parameter name="schemaName" valueType="STATIC">apps</Parameter>
			<Parameter name="packageName" valueType="STATIC">WWT_ORCP_INVENTORY_PROCESSOR</Parameter>
			<Parameter name="procedureName" valueType="STATIC">CONVERT_CART_RES_TO_ORDER_RES</Parameter>
			<Parameter name="dbName" valueType="STATIC">ERP</Parameter>
			<Parameter name="parameter1" valueType="STATIC">X_RETCODE,NUMBER,OUT,,,WWT_STG_ORDER_HEADERS/OTOSTempVariables/cartErrorCode</Parameter>
			<Parameter name="parameter2" valueType="STATIC"> X_ERRBUFF,VARCHAR2,OUT,,,WWT_STG_ORDER_HEADERS/OTOSTempVariables/cartErrorMsg</Parameter>
			<Parameter name="parameter3" valueType="STATIC">P_SO_HEADER_ID,NUMBER,IN,WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/soHeaderID,REFERENCE,</Parameter>
			<ExceptionHandler type="ERROR">Could not make call to apps.WWT_ORCP_INVENTORY_PROCESSOR.CONVERT_CART_RES_TO_ORDER_RES</ExceptionHandler>
		</Action>
	</ConditionSet>
	<ConditionSet name="Send email if we encounter an error from Cart Reservation" exitOnSuccess="Y"> 
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/OTOSTempVariables/cartErrorCode</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">2</RHSValue>
		</Condition>
		<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/OTOSTempVariables/skipReserve</LHSValue>
			<Operator>!=</Operator>
			<RHSValue valueType="STATIC">Y</RHSValue>
		</Condition> 			
		<Action name="Send notification when error" class="sendInternalEmail">
			<Parameter name="subject" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE33</Parameter>
			<Parameter name="toList" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE35</Parameter>
			<Parameter name="body" valueType="STATIC">
Please see order details for PO# %WWT_STG_ORDER_HEADERS/CUSTOMER_PO_NUMBER%:

Error Returned from Cart Reservation: %WWT_STG_ORDER_HEADERS/OTOSTempVariables/cartErrorMsg%

Sales Order: %WWT_STG_ORDER_HEADERS/STATUS_MESSAGE% 

SO Header ID: %WWT_STG_ORDER_HEADERS/persistedOTOSTempVariables/soHeaderID%</Parameter>
			<ExceptionHandler type="WARN">Could not send email</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

<Rule name="Send Confirmation Email that Order was submitted" class="POST-PINWHEEL" executeOnReprocess="Y">
	<ConditionSet name="Send Confirmation Email that Order was submitted" exitOnSuccess="Y">
			<Condition>
			<LHSValue>WWT_STG_ORDER_HEADERS/STATUS</LHSValue>
			<Operator>=</Operator>
			<RHSValue valueType="STATIC">PROCESSED</RHSValue>
		</Condition> 
		<Action name="Send notification" class="sendInternalEmail">
			<Parameter name="subject" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE32</Parameter>
			<Parameter name="toList" valueType="REFERENCE">WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE34</Parameter>
      <Parameter name="content_type" valueType="STATIC">text/html</Parameter> 
			<Parameter name="body" valueType="STATIC">
<![CDATA[
<html>
<body>
    <h2>Order Submitted FOR: %WWT_STG_ORDER_HEADERS/CUSTOMER_PO_NUMBER%</h2>
	<h3>Sales Order: %WWT_STG_ORDER_HEADERS/STATUS_MESSAGE%</h3>
    &nbsp;Order for %WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE4% - %WWT_STG_ORDER_HEADERS/CREATION_DATE%</h2>
     
    <hr><h2>Shipping Address</h2>
    &nbsp;&nbsp;Address Line 1 : %WWT_STG_ORDER_HEADERS/SHIP_TO_ADDRESS1% <br>
    &nbsp;&nbsp;Address Line 2 : %WWT_STG_ORDER_HEADERS/SHIP_TO_ADDRESS2% <br>
    &nbsp;&nbsp;City : %WWT_STG_ORDER_HEADERS/SHIP_TO_CITY%  <br>
    &nbsp;&nbsp;State : %WWT_STG_ORDER_HEADERS/SHIP_TO_STATE% <br>
    &nbsp;&nbsp;Zip : %WWT_STG_ORDER_HEADERS/SHIP_TO_POSTAL_CODE% <br>

    <hr><h2>Items</h2>
    &nbsp;&nbsp;%WWT_STG_ORDER_HEADERS/WWT_ATTRIBUTE47%
</body>
</html>]]>
</Parameter>
			<ExceptionHandler type="WARN">Could not send email</ExceptionHandler>
		</Action>
	</ConditionSet>
</Rule>

</ProcessingGroup>